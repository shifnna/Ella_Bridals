<%-include("../../views/partials/H-profile")%>

<!-- Order Details Section -->
<main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
  <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
      <h1 class="h2">My Orders</h1>
  </div>

  <% if (orders.length <= 0) { %>
      <div class="order-header row mb-4">
          <div class="col-md-12">
              <h4 style="margin-top: 3%;" class="order-summary-title">No Order Summary</h4>
          </div>
      </div>
  <% } else { %>
      <!-- Orders List -->
      <% orders.forEach(function(order) { %>
          <div class="order-card mb-3 p-3" style="border: 1px solid #ebebeb; background-color: #f9f9f9; max-width: 90%; margin: auto;">
              <div class="row">
                  <div class="col-md-10">
                      <h6 class="product-title">
                          Status: <%= order.status %> <span class="status-circle <%= order.status.toLowerCase() %>"></span>
                      </h6>
                      <p>ORDER NUMBER: <%= order._id %></p>
                      <div class="product-images" style="display: flex; flex-wrap: wrap;">
                          <% order.products.forEach(function(product) { %>
                              <% if (product.productImage && product.productImage.length > 0) { %>
                                  <div style="margin: 5px;">
                                      <img style="width: 80px; height: 80px;" src="/imgs/re-images/<%= product.productImage[0] %>" alt="Product Image" class="img-fluid rounded">
                                  </div>
                              <% } %>
                          <% }); %>
                      </div>
                  </div>
                  <div class="col-md-2 text-end">
                      <a style="border-color: #0e0c0d;" href="/orderDetails?orderId=<%= order._id %>" class="btn btn-outline-primary btn-sm view-details-btn">
                          View Details
                      </a>
                  </div>
              </div>
          </div>
      <% }); %>
  <% } %>
  
  <!-- Order Actions -->
  <div class="mt-4 text-center">
      <button style="background-color: #0e0c0d; border-color: #0e0c0d;" class="btn btn-outline-primary">
          <a style="text-decoration: none; color: aliceblue;" href="/shop">Continue Shopping</a>
      </button>
  </div>
</main>


<!-- Custom CSS for Status Circle -->
<style>
    .status-circle {
        display: inline-block;
        width: 10px;
        height: 10px;
        border-radius: 50%;
        margin-right: 8px;
    }
    
    /* Status color styles */
    .OrderConfirmed {
        background-color: rgb(55, 75, 118);
    }

    .delivered {
        background-color: green;
    }

    .failed {
        background-color: red;
    }

    .cancelled {
        background-color: rgb(194, 128, 80);
    }
    .returned{
      background-color:  rgb(55, 75, 118);
    }

    .view-details-btn{
      color: #0e0c0d;
      
    }
    .view-details-btn:hover {
    color: white; /* Change text color to white */
    background-color: #0e0c0d; /* Optionally change the background color */
    border-color: #0e0c0d; /* Keep border consistent */
}

</style>

<!-- Bootstrap 5 JS CDN -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
<script>
    $(document).ready(function() {
      $('.dropdown-toggle').dropdown();
    });
</script>
<!-- Js Plugins -->
<script src="js/jquery-3.3.1.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/jquery.magnific-popup.min.js"></script>
<script src="js/jquery-ui.min.js"></script>
<script src="js/mixitup.min.js"></script>
<script src="js/jquery.countdown.min.js"></script>
<script src="js/jquery.slicknav.js"></script>
<script src="js/owl.carousel.min.js"></script>
<script src="js/jquery.nicescroll.min.js"></script>
<script src="js/main.js"></script>
</body>

</html>
